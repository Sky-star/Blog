## 需求

写一个函数， 输入`'kevin'`，返回`HELLO,KEVIN`

## 普通写法

需要一个转换成大写的函数，以及一个拼接`HELLO`的函数

```js
var toUpperCase = function (x) {
	return x.toUpperCase()
}
var hello = function (x) {
	return "HELLO, " + x
}

var greet = function (x) {
	return hello(toUpperCate(x))
}

greet("kevin")
```

一个简单的流程，最终被组合在一起的时候，却发生了很多嵌套，最后会非常难以阅读

类似于这样`fn3(fn2(fn1(fn0(x))))`

## 优化

可以写个工具函数 compose 函数，来解决上面说到的问题

```js
var compose = function (f, g) {
	return function (x) {
		return f(g(x))
	}
}
```

greet 函数就可以优化成:

```js
var greet = compose(hello, toUpperCase)
greet("kevin")
```

利用 compose 函数将两个函数组合成一个函数，让代码从右向左执行，而不是有内而外执行，可读性大大提升，这就是函数组合

现在的 compose 函数只能支持两个函数，如果有更多的步骤，可能会这样

```js
compose(d, compose(c, compose(b, a)))
```

需要改写一下 compose 函数，让他可以支持传入多个参数，并从右到左执行

```js
compose(d, c, b, a)
```

## compose

直接看下 underscore 的 compose 函数

```js
function compose() {
	var args = arguments
	var start = args.length - 1
	return function () {
		var i = start
		var result = args[start].apply(this, arguments)
		while (i--) result = args[i].call(this, result)
		return result
	}
}
```

来看下思路:

1. 使用闭包返回组合后的函数
2. start 从参数尾部开始
3. 执行时，先执行最后一个函数，然后将这个函数的结果作为上一个函数的参数执行，直到 i 为 0
4. 返回最后执行结果

现在的 compose 函数已经可以支持多个参数了，但是又有什么用呢?

在此之前先了解个概念叫做 pointfree
